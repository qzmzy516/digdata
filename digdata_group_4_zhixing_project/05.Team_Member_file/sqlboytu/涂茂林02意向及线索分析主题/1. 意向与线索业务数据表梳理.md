### **意向与线索业务数据表梳理**

#### 1. customer：客户静态信息表

| 字段名称                 | 字段注释           |
| ------------------------ | ------------------ |
| id                       | 学员id             |
| customer_relationship_id | 当前用户的意向id   |
| create_date_time         | 创建时间           |
| update_date_time         | 最后更新时间       |
| deleted                  | 是否被删除（禁用） |
| name                     | 姓名               |
| idcard                   | 身份证号           |
| birth_year               | 出生年份           |
| gender                   | 性别               |
| phone                    | 手机号             |
| wechat                   | 微信               |
| qq                       | qq号               |
| email                    | 邮箱               |
| area                     | 所在区域           |
| leave_school_date        | 离校时间           |
| graduation_date          | 毕业时间           |
| bxg_student_id           | 博学谷学员ID       |
| creator                  | 创建人ID           |
| origin_type              | 数据来源           |
| origin_channel           | 来源渠道           |
| tenant                   |                    |
| md_id                    | 中台id             |

```mysql
CREATE TABLE customer
(
    id                       INT AUTO_INCREMENT
        PRIMARY KEY,
    customer_relationship_id INT                                                     NULL COMMENT '当前意向id',
    create_date_time         DATETIME                      DEFAULT CURRENT_TIMESTAMP NOT NULL COMMENT '创建时间',
    update_date_time         TIMESTAMP                     DEFAULT CURRENT_TIMESTAMP NOT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '最后更新时间',
    deleted                  BIT                           DEFAULT b'0'              NOT NULL COMMENT '是否被删除（禁用）',
    name                     VARCHAR(128) COLLATE utf8_bin DEFAULT ''                NOT NULL COMMENT '姓名',
    idcard                   VARCHAR(24) COLLATE utf8_bin  DEFAULT ''                NULL COMMENT '身份证号',
    birth_year               INT(5)                                                  NULL COMMENT '出生年份',
    gender                   VARCHAR(8) COLLATE utf8_bin   DEFAULT 'MAN'             NULL COMMENT '性别',
    phone                    VARCHAR(24) COLLATE utf8_bin  DEFAULT ''                NOT NULL COMMENT '手机号',
    wechat                   VARCHAR(32) COLLATE utf8_bin  DEFAULT ''                NULL COMMENT '微信',
    qq                       VARCHAR(32) COLLATE utf8_bin  DEFAULT ''                NULL COMMENT 'qq号',
    email                    VARCHAR(56) COLLATE utf8_bin  DEFAULT ''                NULL COMMENT '邮箱',
    area                     VARCHAR(128)                  DEFAULT ''                NULL COMMENT '所在区域',
    leave_school_date        DATE                                                    NULL COMMENT '离校时间',
    graduation_date          DATE                                                    NULL COMMENT '毕业时间',
    bxg_student_id           VARCHAR(64)                                             NULL COMMENT '博学谷学员ID，可能未关联到，不存在',
    creator                  INT                                                     NULL COMMENT '创建人ID',
    origin_type              VARCHAR(32) COLLATE utf8_bin                            NULL COMMENT '数据来源',
    origin_channel           VARCHAR(32) COLLATE utf8_bin                            NULL COMMENT '来源渠道',
    tenant                   INT                           DEFAULT 0                 NOT NULL,
    md_id                    INT                           DEFAULT 0                 NULL COMMENT '中台id',
    CONSTRAINT customer_ibfk_1
        FOREIGN KEY (creator) REFERENCES employee (id)
);

```



#### 2. customer_appeal：线索申诉信息表

| 字段名称                       | 字段注释                          |
| ------------------------------ | --------------------------------- |
| id                             | 主键                              |
| customer_relationship_first_id | 第一条客户关系id                  |
| employee_id                    | 申诉人                            |
| employee_name                  | 申诉人姓名                        |
| employee_department_id         | 申诉人部门                        |
| employee_tdepart_id            | 申诉人所属部门                    |
| appeal_status                  | 申诉状态，0:待稽核 1:无效 2：有效 |
| audit_id                       | 稽核人id                          |
| audit_name                     | 稽核人姓名                        |
| audit_department_id            | 稽核人所在部门                    |
| audit_department_name          | 稽核人部门名称                    |
| audit_date_time                | 稽核时间                          |
| create_date_time               | 创建时间（申诉时间）              |
| update_date_time               | 更新时间                          |
| deleted                        | 删除标志位                        |
| tenant                         | 无                                |

```mysql
CREATE TABLE customer_appeal
(
    id                             INT AUTO_INCREMENT COMMENT '主键'
        PRIMARY KEY,
    customer_relationship_first_id INT                                 NOT NULL COMMENT '第一条客户关系id',
    employee_id                    INT                                 NULL COMMENT '申诉人',
    employee_name                  VARCHAR(64)                         NULL COMMENT '申诉人姓名',
    employee_department_id         INT                                 NULL COMMENT '申诉人部门',
    employee_tdepart_id            INT                                 NULL COMMENT '申诉人所属部门',
    appeal_status                  INT(1)                              NOT NULL COMMENT '申诉状态，0:待稽核 1:无效 2：有效',
    audit_id                       INT                                 NULL COMMENT '稽核人id',
    audit_name                     VARCHAR(255)                        NULL COMMENT '稽核人姓名',
    audit_department_id            INT                                 NULL COMMENT '稽核人所在部门',
    audit_department_name          VARCHAR(255)                        NULL COMMENT '稽核人部门名称',
    audit_date_time                DATETIME                            NULL COMMENT '稽核时间',
    create_date_time               DATETIME  DEFAULT CURRENT_TIMESTAMP NULL COMMENT '创建时间（申诉时间）',
    update_date_time               TIMESTAMP DEFAULT CURRENT_TIMESTAMP NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    deleted                        BIT       DEFAULT b'0'              NOT NULL COMMENT '删除标志位',
    tenant                         INT       DEFAULT 0                 NOT NULL
)
```



#### 3. **customer_clue**：客户线索表

| 字段名称                 | 字段注释                                                     |
| ------------------------ | ------------------------------------------------------------ |
| id                       | 线索id                                                       |
| create_date_time         | 创建时间                                                     |
| update_date_time         | 最后更新时间                                                 |
| deleted                  | 是否被删除（禁用）                                           |
| customer_id              | 客户id                                                       |
| customer_relationship_id | 客户意向id                                                   |
| session_id               | 七陌会话id                                                   |
| sid                      | 访客id                                                       |
| status                   | 状态（undeal待领取 deal 已领取 finish 已关闭 changePeer 已流转） |
| user                     | 所属坐席                                                     |
| create_time              | 七陌创建时间                                                 |
| platform                 | 平台来源 （pc-网站咨询                                       |
| s_name                   | 用户名称                                                     |
| seo_source               | 搜索来源                                                     |
| seo_keywords             | 关键字                                                       |
| ip                       | IP地址                                                       |
| referrer                 | 上级来源页面                                                 |
| from_url                 | 会话来源页面                                                 |
| landing_page_url         | 访客着陆页面                                                 |
| url_title                | 咨询页面title                                                |
| to_peer                  | 所属技能组                                                   |
| manual_time              | 人工开始时间                                                 |
| begin_time               | 坐席领取时间                                                 |
| reply_msg_count          | 客服回复消息数                                               |
| total_msg_count          | 消息总数                                                     |
| msg_count                | 客户发送消息数                                               |
| comment                  | 备注                                                         |
| finish_reason            | 结束类型                                                     |
| finish_user              | 结束坐席                                                     |
| end_time                 | 会话结束时间                                                 |
| platform_description     | 客户平台信息                                                 |
| browser_name             | 浏览器名称                                                   |
| os_info                  | 系统名称                                                     |
| area                     | 区域                                                         |
| country                  | 所在国家                                                     |
| province                 | 省                                                           |
| city                     | 城市                                                         |
| creator                  | 创建人                                                       |
| name                     | 客户姓名                                                     |
| idcard                   | 身份证号                                                     |
| phone                    | 手机号                                                       |
| itcast_school_id         | 校区Id                                                       |
| itcast_school            | 校区名称                                                     |
| itcast_subject_id        | 学科Id                                                       |
| itcast_subject           | 学科名称                                                     |
| wechat                   | 微信                                                         |
| qq                       | qq号                                                         |
| email                    | 邮箱                                                         |
| gender                   | 性别                                                         |
| level                    | 客户级别                                                     |
| origin_type              | 数据来源渠道                                                 |
| information_way          | 资讯方式                                                     |
| working_years            | 开始工作时间                                                 |
| technical_directions     | 技术方向                                                     |
| customer_state           | 当前客户状态                                                 |
| valid                    | 该线索是否是网资有效线索                                     |
| anticipat_signup_date    | 预计报名时间                                                 |
| clue_state               | 线索状态  ：VALID_NEW_CLUES，代表新线索，是新学员            |
| scrm_department_id       | SCRM内部部门id                                               |
| superior_url             | 诸葛获取上级页面URL                                          |
| superior_source          | 诸葛获取上级页面URL标题                                      |
| landing_url              | 诸葛获取着陆页面URL                                          |
| landing_source           | 诸葛获取着陆页面URL来源                                      |
| info_url                 | 诸葛获取留咨页URL                                            |
| info_source              | 诸葛获取留咨页URL标题                                        |
| origin_channel           | 投放渠道                                                     |
| course_id                | 无                                                           |
| course_name              | 无                                                           |
| zhuge_session_id         | 无                                                           |
| is_repeat                | 是否重复线索(手机号维度) 0:正常 1：重复                      |
| tenant                   | 租户id                                                       |
| activity_id              | 活动id                                                       |
| activity_name            | 活动名称                                                     |
| follow_type              | 分配类型，0-自动分配，1-手动分配，2-自动转移，3-手动单个转移，4-手动批量转移，5-公海领取 |
| shunt_mode_id            | 匹配到的技能组id                                             |
| shunt_employee_group_id  | 所属分流员工组                                               |

```mysql
CREATE TABLE customer_clue
(
    id                       INT AUTO_INCREMENT
        PRIMARY KEY,
    create_date_time         DATETIME      DEFAULT CURRENT_TIMESTAMP NOT NULL COMMENT '创建时间',
    update_date_time         TIMESTAMP     DEFAULT CURRENT_TIMESTAMP NOT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '最后更新时间',
    deleted                  BIT           DEFAULT b'0'              NOT NULL COMMENT '是否被删除（禁用）',
    customer_id              INT                                     NULL COMMENT '客户id',
    customer_relationship_id INT                                     NULL COMMENT '客户关系id',
    session_id               VARCHAR(48)   DEFAULT ''                NULL COMMENT '七陌会话id',
    sid                      VARCHAR(48)   DEFAULT ''                NULL COMMENT '访客id',
    status                   VARCHAR(16)   DEFAULT ''                NULL COMMENT '状态（undeal待领取 deal 已领取 finish 已关闭 changePeer 已流转）',
    user                     VARCHAR(16)   DEFAULT ''                NULL COMMENT '所属坐席',
    create_time              DATETIME                                NULL COMMENT '七陌创建时间',
    platform                 VARCHAR(16)   DEFAULT ''                NULL COMMENT '平台来源 （pc-网站咨询|wap-wap咨询|sdk-app咨询|weixin-微信咨询）',
    s_name                   VARCHAR(32)   DEFAULT ''                NULL COMMENT '用户名称',
    seo_source               VARCHAR(255)  DEFAULT ''                NULL COMMENT '搜索来源',
    seo_keywords             VARCHAR(255)  DEFAULT ''                NULL COMMENT '关键字',
    ip                       VARCHAR(48)   DEFAULT ''                NULL COMMENT 'IP地址',
    referrer                 TEXT                                    NULL COMMENT '上级来源页面',
    from_url                 TEXT                                    NULL COMMENT '会话来源页面',
    landing_page_url         TEXT                                    NULL COMMENT '访客着陆页面',
    url_title                VARCHAR(1024) DEFAULT ''                NULL COMMENT '咨询页面title',
    to_peer                  VARCHAR(255)  DEFAULT ''                NULL COMMENT '所属技能组',
    manual_time              DATETIME                                NULL COMMENT '人工开始时间',
    begin_time               DATETIME                                NULL COMMENT '坐席领取时间 ',
    reply_msg_count          INT           DEFAULT 0                 NULL COMMENT '客服回复消息数',
    total_msg_count          INT           DEFAULT 0                 NULL COMMENT '消息总数',
    msg_count                INT           DEFAULT 0                 NULL COMMENT '客户发送消息数',
    comment                  VARCHAR(1024) DEFAULT ''                NULL COMMENT '备注',
    finish_reason            VARCHAR(255)  DEFAULT ''                NULL COMMENT '结束类型',
    finish_user              VARCHAR(32)   DEFAULT ''                NULL COMMENT '结束坐席',
    end_time                 DATETIME                                NULL COMMENT '会话结束时间',
    platform_description     VARCHAR(255)  DEFAULT ''                NULL COMMENT '客户平台信息',
    browser_name             VARCHAR(255)  DEFAULT ''                NULL COMMENT '浏览器名称',
    os_info                  VARCHAR(255)  DEFAULT ''                NULL COMMENT '系统名称',
    area                     VARCHAR(255)                            NULL COMMENT '区域',
    country                  VARCHAR(16)   DEFAULT ''                NULL COMMENT '所在国家',
    province                 VARCHAR(16)   DEFAULT ''                NULL COMMENT '省',
    city                     VARCHAR(255)  DEFAULT ''                NULL COMMENT '城市',
    creator                  INT           DEFAULT 0                 NULL COMMENT '创建人',
    name                     VARCHAR(64)   DEFAULT ''                NULL COMMENT '客户姓名',
    idcard                   VARCHAR(24)   DEFAULT ''                NULL COMMENT '身份证号',
    phone                    VARCHAR(24)   DEFAULT ''                NULL COMMENT '手机号',
    itcast_school_id         INT                                     NULL COMMENT '校区Id',
    itcast_school            VARCHAR(128)  DEFAULT ''                NULL COMMENT '校区',
    itcast_subject_id        INT                                     NULL COMMENT '学科Id',
    itcast_subject           VARCHAR(128)  DEFAULT ''                NULL COMMENT '学科',
    wechat                   VARCHAR(32)   DEFAULT ''                NULL COMMENT '微信',
    qq                       VARCHAR(32)   DEFAULT ''                NULL COMMENT 'qq号',
    email                    VARCHAR(56)   DEFAULT ''                NULL COMMENT '邮箱',
    gender                   VARCHAR(8)    DEFAULT 'MAN'             NULL COMMENT '性别',
    level                    VARCHAR(8)                              NULL COMMENT '客户级别',
    origin_type              VARCHAR(32)   DEFAULT ''                NULL COMMENT '数据来源渠道',
    information_way          VARCHAR(32)                             NULL COMMENT '资讯方式',
    working_years            DATE                                    NULL COMMENT '开始工作时间',
    technical_directions     VARCHAR(255)  DEFAULT ''                NULL COMMENT '技术方向',
    customer_state           VARCHAR(32)   DEFAULT ''                NULL COMMENT '当前客户状态',
    valid                    BIT           DEFAULT b'0'              NULL COMMENT '该线索是否是网资有效线索',
    anticipat_signup_date    DATE                                    NULL COMMENT '预计报名时间',
    clue_state               VARCHAR(32)   DEFAULT 'NOT_SUBMIT'      NULL COMMENT '线索状态',
    scrm_department_id       INT                                     NULL COMMENT 'SCRM内部部门id',
    superior_url             TEXT                                    NULL COMMENT '诸葛获取上级页面URL',
    superior_source          VARCHAR(1024)                           NULL COMMENT '诸葛获取上级页面URL标题',
    landing_url              TEXT                                    NULL COMMENT '诸葛获取着陆页面URL',
    landing_source           VARCHAR(1024)                           NULL COMMENT '诸葛获取着陆页面URL来源',
    info_url                 TEXT                                    NULL COMMENT '诸葛获取留咨页URL',
    info_source              VARCHAR(255)                            NULL COMMENT '诸葛获取留咨页URL标题',
    origin_channel           VARCHAR(32)   DEFAULT ''                NULL COMMENT '投放渠道',
    course_id                INT(32)                                 NULL,
    course_name              VARCHAR(255)                            NULL,
    zhuge_session_id         VARCHAR(500)                            NULL,
    is_repeat                INT(4)        DEFAULT 0                 NOT NULL COMMENT '是否重复线索(手机号维度) 0:正常 1：重复',
    tenant                   INT           DEFAULT 0                 NOT NULL COMMENT '租户id',
    activity_id              VARCHAR(16)                             NULL COMMENT '活动id',
    activity_name            VARCHAR(64)                             NULL COMMENT '活动名称',
    follow_type              INT(4)        DEFAULT 0                 NULL COMMENT '分配类型，0-自动分配，1-手动分配，2-自动转移，3-手动单个转移，4-手动批量转移，5-公海领取',
    shunt_mode_id            INT                                     NULL COMMENT '匹配到的技能组id',
    shunt_employee_group_id  INT                                     NULL COMMENT '所属分流员工组',
    CONSTRAINT customer_clue_ibfk_1
        FOREIGN KEY (customer_id) REFERENCES customer (id),
    CONSTRAINT customer_clue_ibfk_2
        FOREIGN KEY (customer_relationship_id) REFERENCES customer_relationship (id)
)
```



#### 4. **customer_relationship**：客户意向表

| 字段名称                    | 字段注释                                                     |
| --------------------------- | ------------------------------------------------------------ |
| id                          | 意向id                                                       |
| create_date_time            | 意向构建时间                                                 |
| update_date_time            | 最后更新时间                                                 |
| deleted                     | 是否被删除（禁用）                                           |
| customer_id                 | 所属客户id 【关联customer表中的id】                          |
| first_id                    | 第一条客户关系id                                             |
| belonger                    | 归属人                                                       |
| belonger_name               | 归属人姓名                                                   |
| initial_belonger            | 初始归属人                                                   |
| distribution_handler        | 分配处理人                                                   |
| business_scrm_department_id | 归属部门                                                     |
| last_visit_time             | 最后回访时间                                                 |
| next_visit_time             | 下次回访时间                                                 |
| origin_type                 | 数据来源 ，线上（NETSERVICE or PRESIGNUP）、线下             |
| itcast_school_id            | 意向校区Id                                                   |
| itcast_subject_id           | 意向学科Id                                                   |
| intention_study_type        | 意向学习方式                                                 |
| anticipat_signup_date       | 预计报名时间                                                 |
| level                       | 客户级别                                                     |
| creator                     | 创建人                                                       |
| current_creator             | 当前创建人：初始创建人，当在公海拉回时为拉回人               |
| creator_name                | 创建者姓名                                                   |
| origin_channel              | 来源渠道                                                     |
| comment                     | 备注                                                         |
| first_customer_clue_id      | 第一条线索id                                                 |
| last_customer_clue_id       | 最后一条线索id                                               |
| process_state               | 处理状态                                                     |
| process_time                | 处理状态变动时间                                             |
| payment_state               | 支付状态                                                     |
| payment_time                | 支付状态变动时间                                             |
| signup_state                | 报名状态                                                     |
| signup_time                 | 报名时间                                                     |
| notice_state                | 通知状态                                                     |
| notice_time                 | 通知状态变动时间                                             |
| lock_state                  | 锁定状态                                                     |
| lock_time                   | 锁定状态修改时间                                             |
| itcast_clazz_id             | 所属ems班级id                                                |
| itcast_clazz_time           | 报班时间                                                     |
| payment_url                 | 付款链接                                                     |
| payment_url_time            | 支付链接生成时间                                             |
| ems_student_id              | ems的学生id                                                  |
| delete_reason               | 删除原因                                                     |
| deleter                     | 删除人                                                       |
| deleter_name                | 删除人姓名                                                   |
| delete_time                 | 删除时间                                                     |
| course_id                   | 课程ID                                                       |
| course_name                 | 课程名称                                                     |
| delete_comment              | 删除原因说明                                                 |
| close_state                 | 关闭装填                                                     |
| close_time                  | 关闭状态变动时间                                             |
| appeal_id                   | 申诉id                                                       |
| tenant                      | 租户                                                         |
| total_fee                   | 报名费总金额                                                 |
| belonged                    | 小周期归属人                                                 |
| belonged_time               | 归属时间                                                     |
| belonger_time               | 归属时间                                                     |
| transfer                    | 转移人                                                       |
| transfer_time               | 转移时间                                                     |
| follow_type                 | 分配类型:0-自动分配，1-手动分配，2-自动转移，3-手动单个转移，4-手动批量转移，5-公海领取 |
| transfer_bxg_oa_account     | 转移到博学谷归属人OA账号                                     |
| transfer_bxg_belonger_name  | 转移到博学谷归属人OA姓名                                     |

```mysql
CREATE TABLE customer_relationship
(
    id                          INT AUTO_INCREMENT
        PRIMARY KEY,
    create_date_time            DATETIME      DEFAULT CURRENT_TIMESTAMP NOT NULL,
    update_date_time            TIMESTAMP     DEFAULT CURRENT_TIMESTAMP NOT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '最后更新时间',
    deleted                     BIT           DEFAULT b'0'              NOT NULL COMMENT '是否被删除（禁用）',
    customer_id                 INT           DEFAULT 0                 NOT NULL COMMENT '所属客户id',
    first_id                    INT                                     NULL COMMENT '第一条客户关系id',
    belonger                    INT                                     NULL COMMENT '归属人',
    belonger_name               VARCHAR(10)                             NULL COMMENT '归属人姓名',
    initial_belonger            INT                                     NULL COMMENT '初始归属人',
    distribution_handler        INT                                     NULL COMMENT '分配处理人',
    business_scrm_department_id INT           DEFAULT 0                 NULL COMMENT '归属部门',
    last_visit_time             DATETIME                                NULL COMMENT '最后回访时间',
    next_visit_time             DATETIME                                NULL COMMENT '下次回访时间',
    origin_type                 VARCHAR(32) COLLATE utf8_bin            NULL COMMENT '数据来源',
    itcast_school_id            INT                                     NULL COMMENT '校区Id',
    itcast_subject_id           INT                                     NULL COMMENT '学科Id',
    intention_study_type        VARCHAR(32) COLLATE utf8_bin            NULL COMMENT '意向学习方式',
    anticipat_signup_date       DATE                                    NULL COMMENT '预计报名时间',
    level                       VARCHAR(8)                              NULL COMMENT '客户级别',
    creator                     INT                                     NULL COMMENT '创建人',
    current_creator             INT                                     NULL COMMENT '当前创建人：初始==创建人，当在公海拉回时为 拉回人',
    creator_name                VARCHAR(32)   DEFAULT ''                NULL COMMENT '创建者姓名',
    origin_channel              VARCHAR(32) COLLATE utf8_bin            NULL COMMENT '来源渠道',
    COMMENT                     VARCHAR(256)                            NULL,
    first_customer_clue_id      INT           DEFAULT 0                 NULL COMMENT '第一条线索id',
    last_customer_clue_id       INT           DEFAULT 0                 NULL COMMENT '最后一条线索id',
    process_state               VARCHAR(32)                             NULL COMMENT '处理状态',
    process_time                DATETIME                                NULL COMMENT '处理状态变动时间',
    payment_state               VARCHAR(32)                             NULL COMMENT '支付状态',
    payment_time                DATETIME                                NULL COMMENT '支付状态变动时间',
    signup_state                VARCHAR(32) COLLATE utf8_bin            NULL COMMENT '报名状态',
    signup_time                 DATETIME                                NULL COMMENT '报名时间',
    notice_state                VARCHAR(32)                             NULL COMMENT '通知状态',
    notice_time                 DATETIME                                NULL COMMENT '通知状态变动时间',
    lock_state                  BIT           DEFAULT b'0'              NULL COMMENT '锁定状态',
    lock_time                   DATETIME                                NULL COMMENT '锁定状态修改时间',
    itcast_clazz_id             INT                                     NULL COMMENT '所属ems班级id',
    itcast_clazz_time           DATETIME                                NULL COMMENT '报班时间',
    payment_url                 VARCHAR(1024) DEFAULT ''                NULL COMMENT '付款链接',
    payment_url_time            DATETIME                                NULL COMMENT '支付链接生成时间',
    ems_student_id              INT                                     NULL COMMENT 'ems的学生id',
    delete_reason               VARCHAR(64)                             NULL COMMENT '删除原因',
    deleter                     INT                                     NULL COMMENT '删除人',
    deleter_name                VARCHAR(32)                             NULL COMMENT '删除人姓名',
    delete_time                 DATETIME                                NULL COMMENT '删除时间',
    course_id                   INT                                     NULL COMMENT '课程ID',
    course_name                 VARCHAR(64)                             NULL COMMENT '课程名称',
    delete_comment              VARCHAR(255)  DEFAULT ''                NULL COMMENT '删除原因说明',
    close_state                 VARCHAR(32)                             NULL COMMENT '关闭装填',
    close_time                  DATETIME                                NULL COMMENT '关闭状态变动时间',
    appeal_id                   INT                                     NULL COMMENT '申诉id',
    tenant                      INT           DEFAULT 0                 NOT NULL COMMENT '租户',
    total_fee                   DECIMAL(19)                             NULL COMMENT '报名费总金额',
    belonged                    INT                                     NULL COMMENT '小周期归属人',
    belonged_time               DATETIME                                NULL COMMENT '归属时间',
    belonger_time               DATETIME                                NULL COMMENT '归属时间',
    transfer                    INT                                     NULL COMMENT '转移人',
    transfer_time               DATETIME                                NULL COMMENT '转移时间',
    follow_type                 INT(4)        DEFAULT 0                 NULL COMMENT '分配类型，0-自动分配，1-手动分配，2-自动转移，3-手动单个转移，4-手动批量转移，5-公海领取',
    transfer_bxg_oa_account     VARCHAR(64)                             NULL COMMENT '转移到博学谷归属人OA账号',
    transfer_bxg_belonger_name  VARCHAR(64)                             NULL COMMENT '转移到博学谷归属人OA姓名',
    CONSTRAINT customer_relationship_ibfk_1
        FOREIGN KEY (customer_id) REFERENCES customer (id)
)
```



#### 5. **employee**：员工信息表

| 字段名称            | 字段注释               |
| ------------------- | ---------------------- |
| id                  | 员工id                 |
| email               | 公司邮箱，OA登录账号   |
| real_name           | 员工的真实姓名         |
| phone               | 手机号，目前还没有     |
| department_id       | OA中的部门编号，有负值 |
| department_name     | OA中的部门名           |
| remote_login        | 员工是否可以远程登录   |
| job_number          | 员工工号               |
| cross_school        | 是否有跨校区权限       |
| last_login_date     | 最后登录日期           |
| creator             | 创建人                 |
| create_date_time    | 创建时间               |
| update_date_time    | 最后更新时间           |
| deleted             | 是否被删除（禁用）     |
| scrm_department_id  | SCRM内部部门id         |
| leave_office        | 离职状态               |
| leave_office_time   | 离职时间               |
| reinstated_time     | 复职时间               |
| superior_leaders_id | 上级领导ID             |
| tdepart_id          | 直属部门               |
| tenant              |                        |
| ems_user_name       |                        |

```mysql
CREATE TABLE employee
(
    id                  INT AUTO_INCREMENT
        PRIMARY KEY,
    email               VARCHAR(64)                           NOT NULL COMMENT '公司邮箱，OA登录账号',
    real_name           VARCHAR(32)                           NOT NULL COMMENT '员工的真实姓名',
    phone               VARCHAR(32)                           NOT NULL COMMENT '手机号，目前还没有使用；隐私问题OA接口没有提供这个属性，',
    department_id       VARCHAR(64) DEFAULT '0'               NULL COMMENT 'OA中的部门编号，有负值',
    department_name     VARCHAR(64) DEFAULT ''                NULL COMMENT 'OA中的部门名',
    remote_login        BIT                                   NOT NULL COMMENT '员工是否可以远程登录',
    job_number          VARCHAR(64)                           NULL COMMENT '员工工号',
    cross_school        BIT                                   NOT NULL COMMENT '是否有跨校区权限',
    last_login_date     DATETIME                              NOT NULL COMMENT '最后登录日期',
    creator             INT(32)                               NULL COMMENT '创建人',
    create_date_time    DATETIME    DEFAULT CURRENT_TIMESTAMP NOT NULL COMMENT '创建时间',
    update_date_time    TIMESTAMP   DEFAULT CURRENT_TIMESTAMP NOT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '最后更新时间',
    deleted             BIT         DEFAULT b'0'              NOT NULL COMMENT '是否被删除（禁用）',
    scrm_department_id  INT(32)                               NULL COMMENT 'SCRM内部部门id',
    leave_office        BIT                                   NULL COMMENT '离职状态',
    leave_office_time   DATETIME                              NULL COMMENT '离职时间',
    reinstated_time     DATETIME                              NULL COMMENT '复职时间',
    superior_leaders_id INT                                   NULL COMMENT '上级领导ID',
    tdepart_id          INT                                   NULL COMMENT '直属部门',
    tenant              INT         DEFAULT 0                 NOT NULL,
    ems_user_name       VARCHAR(32)                           NULL
)
```



#### 6. **itcast_clazz**：班级信息表

| 字段名称            | 字段注释           |
| ------------------- | ------------------ |
| id                  | 班级id(非自增)     |
| create_date_time    | 创建时间           |
| update_date_time    | 最后更新时间       |
| deleted             | 是否被删除（禁用） |
| itcast_school_id    | 校区ID             |
| itcast_school_name  | 校区名称           |
| itcast_subject_id   | 学科ID             |
| itcast_subject_name | 学科名称           |
| itcast_brand        | 品牌               |
| clazz_type_state    | 班级类型状态       |
| clazz_type_name     | 班级类型名称       |
| teaching_mode       | 授课模式           |
| start_time          | 开班时间           |
| end_time            | 毕业时间           |
| comment             | 备注               |
| detail              | 详情(比如：27期)   |
| uncertain           | 待定班(0:否,1:是)  |
| tenant              | 无                 |

```mysql
CREATE TABLE itcast_clazz
(
    id                  INT                                    NOT NULL COMMENT 'ems课程id(非自增)'
        PRIMARY KEY,
    create_date_time    DATETIME     DEFAULT CURRENT_TIMESTAMP NOT NULL COMMENT '创建时间',
    update_date_time    TIMESTAMP    DEFAULT CURRENT_TIMESTAMP NOT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '最后更新时间',
    deleted             BIT          DEFAULT b'0'              NOT NULL COMMENT '是否被删除（禁用）',
    itcast_school_id    VARCHAR(32)  DEFAULT ''                NULL COMMENT 'ems校区ID',
    itcast_school_name  VARCHAR(32)  DEFAULT ''                NULL COMMENT 'ems校区名称',
    itcast_subject_id   VARCHAR(32)  DEFAULT ''                NULL COMMENT 'ems学科ID',
    itcast_subject_name VARCHAR(32)  DEFAULT ''                NULL COMMENT 'ems学科名称',
    itcast_brand        VARCHAR(32)                            NULL COMMENT 'ems品牌',
    clazz_type_state    VARCHAR(32)                            NULL COMMENT '班级类型状态',
    clazz_type_name     VARCHAR(32)  DEFAULT ''                NULL COMMENT '班级类型名称',
    teaching_mode       VARCHAR(32)                            NULL COMMENT '授课模式',
    start_time          DATETIME                               NULL COMMENT '开班时间',
    end_time            DATETIME                               NULL COMMENT '毕业时间',
    comment             VARCHAR(255) DEFAULT ''                NULL COMMENT '备注',
    detail              VARCHAR(32)                            NULL COMMENT '详情(比如：27期)',
    uncertain           BIT          DEFAULT b'0'              NULL COMMENT '待定班(0:否,1:是)',
    tenant              INT          DEFAULT 0                 NOT NULL
)
```



#### 7. **itcast_school**：校区信息表

| 字段名称         | 字段注释           |
| ---------------- | ------------------ |
| id               | 校区id             |
| create_date_time | 创建时间           |
| update_date_time | 最后更新时间       |
| deleted          | 是否被删除（禁用） |
| name             | 校区名称           |
| code             | 无                 |
| tenant           | 无                 |

```mysql
CREATE TABLE itcast_school
(
    id               INT AUTO_INCREMENT
        PRIMARY KEY,
    create_date_time DATETIME    DEFAULT CURRENT_TIMESTAMP NOT NULL COMMENT '创建时间',
    update_date_time TIMESTAMP   DEFAULT CURRENT_TIMESTAMP NOT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '最后更新时间',
    deleted          BIT         DEFAULT b'0'              NOT NULL COMMENT '是否被删除（禁用）',
    name             VARCHAR(32) DEFAULT ''                NOT NULL COMMENT '校区名称',
    code             VARCHAR(32)                           NOT NULL,
    tenant           INT         DEFAULT 0                 NOT NULL
)
```



#### 8. **itcast_subject**：学科信息表



| 字段名称         | 字段注释           |
| ---------------- | ------------------ |
| id               | 学科id             |
| create_date_time | 创建时间           |
| update_date_time | 最后更新时间       |
| deleted          | 是否被删除（禁用） |
| name             | 学科名称           |
| code             | 无                 |
| tenant           | 无                 |

```mysql
CREATE TABLE itcast_subject
(
    id               INT AUTO_INCREMENT
        PRIMARY KEY,
    create_date_time DATETIME                              NOT NULL COMMENT '创建时间',
    update_date_time TIMESTAMP   DEFAULT CURRENT_TIMESTAMP NOT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '最后更新时间',
    deleted          BIT         DEFAULT b'0'              NOT NULL COMMENT '是否被删除（禁用）',
    name             VARCHAR(32) DEFAULT ''                NULL COMMENT '学科名称',
    code             VARCHAR(32)                           NULL,
    tenant           INT         DEFAULT 0                 NOT NULL
)
```



#### 9. **scrm_department**：员工部门表

| 字段名称         | 字段注释               |
| ---------------- | ---------------------- |
| id               | 部门id                 |
| name             | 部门名称               |
| parent_id        | 父部门id               |
| create_date_time | 创建时间               |
| update_date_time | 更新时间               |
| deleted          | 删除标志               |
| id_path          | 编码全路径             |
| tdepart_code     | 直属部门               |
| creator          | 创建者                 |
| depart_level     | 部门层级               |
| depart_sign      | 部门标志，暂时默认1    |
| depart_line      | 业务线，存储业务线编码 |
| depart_sort      | 排序字段               |
| disable_flag     | 禁用标志               |
| tenant           | 无                     |

```mysql
CREATE TABLE scrm_department
(
    id               INT AUTO_INCREMENT COMMENT '部门id'
        PRIMARY KEY,
    name             VARCHAR(255)                        NULL COMMENT '部门名称',
    parent_id        INT                                 NULL COMMENT '父部门id',
    create_date_time DATETIME  DEFAULT CURRENT_TIMESTAMP NULL COMMENT '创建时间',
    update_date_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    deleted          BIT       DEFAULT b'0'              NULL COMMENT '删除标志',
    id_path          VARCHAR(1000)                       NULL COMMENT '编码全路径',
    tdepart_code     INT                                 NULL COMMENT '直属部门',
    creator          VARCHAR(32)                         NULL COMMENT '创建者',
    depart_level     INT(4)                              NULL COMMENT '部门层级',
    depart_sign      INT(4)                              NULL COMMENT '部门标志，暂时默认1',
    depart_line      INT                                 NULL COMMENT '业务线，存储业务线编码',
    depart_sort      INT(5)                              NULL COMMENT '排序字段',
    disable_flag     INT(1)                              NULL COMMENT '禁用标志',
    tenant           INT       DEFAULT 0                 NOT NULL
)
```

